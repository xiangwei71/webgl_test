!function(t){var i={};function r(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=i,r.d=function(t,i,n){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)r.d(n,e,function(i){return t[i]}.bind(null,e));return n},r.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="",r(r.s=0)}([function(t,i,r){"use strict";r.r(i);var n=function(){function t(t,i,r){this.x=0,this.y=0,this.z=0,this.x=t,this.y=i,this.z=r}return t.add=function(i,r){return new t(r.x+i.x,r.y+i.y,r.z+i.z)},t.minus=function(i,r){return new t(i.x-r.x,i.y-r.y,i.z-r.z)},t.multiply=function(i,r){return new t(i.x*r,i.y*r,i.z*r)},t.cross_product=function(i,r){return new t(i.y*r.z-i.z*r.y,-i.x*r.z+i.z*r.x,i.x*r.y-i.y*r.x)},t.dot_product=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){var t=this.length();return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,this},t.prototype.add=function(i){return t.add(this,i)},t.prototype.minus=function(i){return t.minus(this,i)},t.prototype.multiply=function(i){return t.multiply(this,i)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.up=new t(0,1,0),t.zero=new t(0,0,0),t}(),e=function(t,i){this.from=t,this.dir=i};function o(t,i){return Math.abs(t-i)<.001}var s=function(){function t(t,i,r){this.z_axis=n.minus(i,t).normalize();var e=n.up;this.x_axis=n.cross_product(e,this.z_axis).normalize(),this.y_axis=n.cross_product(this.z_axis,this.x_axis),this.eye=t,this.fov_degree=r}return t.prototype.create_ray=function(t,i,r){var n,o=(n=.5*this.fov_degree,Math.PI*n/180),s=Math.tan(o),u=s*r,h=this.z_axis.add(this.x_axis.multiply(t*u)).add(this.y_axis.multiply(i*s));return new e(this.eye.clone(),h)},t.prototype.render=function(t,i){var r=this;t.render_pixel((function(t,e,o){var s=r.create_ray(t,e,o),u=i.map((function(t){return t.hit(s)})).filter((function(t){return t.is_hit})).sort((function(t,i){return t.t-i.t}));if(0!=u.length)var h=u[0],a=h.is_hit?1:0,c=h.is_hit?1:0,p=0;else a=.5,c=.5,p=.5;return new n(a,c,p)}))},t}(),u=function(){function t(t,i,r){this.plane=t,this.w=i,this.h=r}return t.prototype.hit=function(t){var i=this.plane.hit(t);if(i.is_hit){var r=i.hit_pos,e=r.minus(this.plane.C),o=n.cross_product(n.up,this.plane.N).normalize(),s=n.cross_product(o,this.plane.N),u=n.dot_product(e,o),h=n.dot_product(e,s);return{is_hit:Math.abs(u)<this.w&&Math.abs(h)<this.h,hit_pos:r,t:i.t}}return{is_hit:!1}},t}(),h=function(){function t(t,i){this.C=t,this.N=i}return t.prototype.is_positive=function(t){var i=n.minus(t,this.C);return n.dot_product(i,this.N)>0},t.prototype.hit=function(t){var i=t.from,r=t.dir,e=n.dot_product(r,this.N),s=n.dot_product(n.minus(this.C,i),this.N);if(o(e,0))return{is_hit:!1,hit_pos:null,t:-1};var u=s/e;return{is_hit:u>0,hit_pos:i.add(r.multiply(u)),t:u}},t}(),a=function(){function t(t,i){this.C=t,this.R=i}return t.prototype.hit=function(t){var i=t.dir,r=t.from,e=n.dot_product(i,i),s=2*(n.dot_product(i,r)-n.dot_product(i,this.C)),u=s*s-4*e*(n.dot_product(r,r)-2*n.dot_product(r,this.C)+n.dot_product(this.C,this.C)-this.R*this.R);if(o(u,0)){var h=-s/(2*e);return{is_hit:!0,hit_pos:r.add(i.multiply(h)),t:h}}if(u>0){var a=Math.sqrt(u);h=[(-s-a)/(2*e),(-s+a)/(2*e)].filter((function(t){return t>0}))[0];return{is_hit:!0,hit_pos:r.add(i.multiply(h)),t:h}}return{is_hit:!1}},t}(),c=function(){function t(t,i){this.w=320,this.h=240,this.backbuffer=null,this.w=t,this.h=i,this.backbuffer=new OffscreenCanvas(this.w,this.h)}return t.prototype.render_pixel=function(t){for(var i=this.backbuffer.getContext("2d"),r=i.getImageData(0,0,this.w,this.h),n=r.data,e=this.w/this.h,o=0;o<this.h;++o)for(var s=0;s<this.w;++s){var u=4*(s+o*this.w),h=s/this.w,a=o/this.h,c=t(2*h-1,2*(a=1-a)-1,e),p=c.x,f=c.y,d=c.z;n[u++]=Math.round(255*p),n[u++]=Math.round(255*f),n[u++]=Math.round(255*d),n[u]=255}i.putImageData(r,0,0);var l=document.getElementById("canvas");l.style.width=this.w+"px",l.style.height=this.h+"px",l.width=l.clientWidth,l.height=l.clientHeight,l.getContext("bitmaprenderer").transferFromImageBitmap(this.backbuffer.transferToImageBitmap())},t}();new function(){var t=[new u(new h(n.zero,new n(0,0,-1)),2,2),new a(new n(6,2,0),2)],i=new s(new n(0,10,-10),n.zero,60),r=new c(320,240);i.render(r,t)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hdGgvVmVjdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9NYXRoL1JheS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTWF0aC9Ub29sLnRzIiwid2VicGFjazovLy8uL3NyYy9NYXRoL0NhbWVyYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTWF0aC9SZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9NYXRoL1BsYW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9NYXRoL1NwaGVyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTWF0aC9SZW5kZXJUYXJnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInB4IiwicHkiLCJweiIsIngiLCJ5IiwieiIsInRoaXMiLCJhZGQiLCJBIiwiQiIsIlZlY3RvciIsIm1pbnVzIiwibXVsdGlwbHkiLCJjcm9zc19wcm9kdWN0IiwiZG90X3Byb2R1Y3QiLCJsZW5ndGgiLCJNYXRoIiwic3FydCIsIm5vcm1hbGl6ZSIsInRlbXAiLCJjbG9uZSIsInVwIiwiemVybyIsImZyb20iLCJkaXIiLCJudW1iZXJfZXF1YWwiLCJhIiwiYiIsImFicyIsImV5ZSIsImxvb2tfYXQiLCJmb3ZfZGVncmVlIiwiel9heGlzIiwiaGVscF92IiwieF9heGlzIiwieV9heGlzIiwiY3JlYXRlX3JheSIsInhfd2VpZ2h0IiwieV93ZWlnaHQiLCJyYXRpbyIsImhhbGZfZm92X3JhZCIsIlBJIiwidGFuX2giLCJ0YW4iLCJ0YW5fdyIsInJlbmRlciIsInJlbmRlcl90YXJnZXQiLCJvYmpfbGlzdCIsInJlbmRlcl9waXhlbCIsInJheSIsImhpdF9zb3J0X2xpc3QiLCJtYXAiLCJvYmoiLCJoaXQiLCJmaWx0ZXIiLCJpbmZvIiwiaXNfaGl0Iiwic29ydCIsInJlc3VsdCIsImciLCJwbGFuZSIsInciLCJoIiwiaGl0X3BvcyIsImRpZmYiLCJDIiwid19heGlzIiwiTiIsImhfYXhpcyIsIndfdmFsdWUiLCJoX3ZhbHVlIiwicG9pbnQiLCJub3JtYWwiLCJpc19wb3NpdGl2ZSIsInRlc3RfcCIsIlIiLCJEIiwiRiIsImsiLCJzcXJ0X2siLCJiYWNrYnVmZmVyIiwiT2Zmc2NyZWVuQ2FudmFzIiwiZnVuYyIsImNvbnRleHRfMmQiLCJnZXRDb250ZXh0IiwiYmFja2J1ZmZlcl9kYXRhIiwiZ2V0SW1hZ2VEYXRhIiwiYmFja2J1ZmZlcl9kYXRhX2FycmF5IiwiZGF0YSIsImluZGV4IiwiWCIsIlkiLCJjb2xvciIsInJvdW5kIiwicHV0SW1hZ2VEYXRhIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInRyYW5zZmVyRnJvbUltYWdlQml0bWFwIiwidHJhbnNmZXJUb0ltYWdlQml0bWFwIiwiY2FtZXJhIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6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QUpsRSxHQUM1QzRELEVBQXNCRSxHQUFTLElBR3ZDTixFQUFXVyxhQUFhVCxFQUFpQixFQUFHLEdBSzVDLElBQUlVLEVBQVNDLFNBQVNDLGVBQWUsVUFDckNGLEVBQU9HLE1BQU1DLE1BQVE3RixLQUFLdUQsRUFBSSxLQUM5QmtDLEVBQU9HLE1BQU1FLE9BQVM5RixLQUFLd0QsRUFBSSxLQUMvQmlDLEVBQU9JLE1BQVFKLEVBQU9NLFlBQ3RCTixFQUFPSyxPQUFTTCxFQUFPTyxhQUdLUCxFQUFPWCxXQUFXLGtCQUN4Qm1CLHdCQUF3QmpHLEtBQUswRSxXQUFXd0IsMEJBRXRFLEVBaEVBLEdDQ0EsSUNNSSxXQUVJLElBRUl6RCxFQUFXLENBRkosSUFBSSxFQUFLLElBQUksRUFBTSxFQUFPekIsS0FBTSxJQUFJLEVBQU8sRUFBRyxHQUFJLElBQUssRUFBRyxHQUN4RCxJQUFJLEVBQU8sSUFBSSxFQUFPLEVBQUcsRUFBRyxHQUFJLElBR3pDbUYsRUFBUyxJQUFJLEVBQU8sSUFBSSxFQUFPLEVBQUcsSUFBSyxJQUFLLEVBQU9uRixLQUFNLElBQ3pEd0IsRUFBZ0IsSUFBSSxFQUFhLElBQUssS0FDMUMyRCxFQUFPNUQsT0FBT0MsRUFBZUMiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3Ige1xyXG5cclxuICAgIHN0YXRpYyB1cCA9IG5ldyBWZWN0b3IoMCwgMSwgMCk7XHJcbiAgICBzdGF0aWMgemVybyA9IG5ldyBWZWN0b3IoMCwgMCwgMCk7XHJcblxyXG4gICAgc3RhdGljIGFkZChBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihCLnggKyBBLngsIEIueSArIEEueSwgQi56ICsgQS56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtaW51cyhBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihBLnggLSBCLngsIEEueSAtIEIueSwgQS56IC0gQi56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtdWx0aXBseShBOiBWZWN0b3IsIHM6IG51bWJlcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihBLnggKiBzLCBBLnkgKiBzLCBBLnogKiBzKTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcm9zc19wcm9kdWN0KEE6IFZlY3RvciwgQjogVmVjdG9yKSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBuZXcgVmVjdG9yKEEueSAqIEIueiAtIEEueiAqIEIueSwgLUEueCAqIEIueiArIEEueiAqIEIueCwgQS54ICogQi55IC0gQS55ICogQi54KTtcclxuICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZG90X3Byb2R1Y3QoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gQS54ICogQi54ICsgQS55ICogQi55ICsgQS56ICogQi56O1xyXG4gICAgfVxyXG5cclxuICAgIHg6IG51bWJlciA9IDA7XHJcbiAgICB5OiBudW1iZXIgPSAwO1xyXG4gICAgejogbnVtYmVyID0gMDtcclxuICAgIGNvbnN0cnVjdG9yKHB4OiBudW1iZXIsIHB5OiBudW1iZXIsIHB6OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSBweDtcclxuICAgICAgICB0aGlzLnkgPSBweTtcclxuICAgICAgICB0aGlzLnogPSBwejtcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnopO1xyXG4gICAgfVxyXG5cclxuICAgIG5vcm1hbGl6ZSgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IHRoaXMubGVuZ3RoKCk7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54IC8gdGVtcDtcclxuICAgICAgICB0aGlzLnkgPSB0aGlzLnkgLyB0ZW1wO1xyXG4gICAgICAgIHRoaXMueiA9IHRoaXMueiAvIHRlbXA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKEE6IFZlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IuYWRkKHRoaXMsIEEpO1xyXG4gICAgfVxyXG5cclxuICAgIG1pbnVzKEE6IFZlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IubWludXModGhpcywgQSk7XHJcbiAgICB9XHJcblxyXG4gICAgbXVsdGlwbHkoczogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5tdWx0aXBseSh0aGlzLCBzKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcclxuICAgIH1cclxufSIsImltcG9ydCBWZWNvciBmcm9tIFwiLi9WZWN0b3JcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJheSB7XHJcbiAgICBmcm9tOiBWZWNvcjtcclxuICAgIGRpcjogVmVjb3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZnJvbTogVmVjb3IsIGRpcjogVmVjb3IpIHtcclxuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xyXG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydCBmdW5jdGlvbiBkZWdyZWVfdG9fUmFkKGQ6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguUEkgKiBkIC8gMTgwO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVwc2lsb246IG51bWJlciA9IDAuMDAxO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcl9lcXVhbChhOiBudW1iZXIsIGI6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8IGVwc2lsb247XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgUmF5IGZyb20gXCIuL1JheVwiO1xyXG5pbXBvcnQgeyBkZWdyZWVfdG9fUmFkIH0gZnJvbSBcIi4vVG9vbFwiXHJcbmltcG9ydCBSZW5kZXJUYXJnZXQgZnJvbSBcIi4vUmVuZGVyVGFyZ2V0XCI7XHJcbmltcG9ydCBIaXRhYmxlIGZyb20gXCIuL0hpdGFibGVcIjtcclxuaW1wb3J0IEhpdEluZm8gZnJvbSBcIi4vSGl0SW5mb1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FtZXJhIHtcclxuICAgIGV5ZTogVmVjdG9yO1xyXG5cclxuICAgIHhfYXhpczogVmVjdG9yO1xyXG4gICAgeV9heGlzOiBWZWN0b3I7XHJcbiAgICB6X2F4aXM6IFZlY3RvcjtcclxuXHJcbiAgICBmb3ZfZGVncmVlOiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihleWU6IFZlY3RvciwgbG9va19hdDogVmVjdG9yLCBmb3ZfZGVncmVlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgLy8gY2FtZXJhIDPou7hcclxuICAgICAgICB0aGlzLnpfYXhpcyA9IFZlY3Rvci5taW51cyhsb29rX2F0LCBleWUpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICBsZXQgaGVscF92ID0gVmVjdG9yLnVwO1xyXG4gICAgICAgIHRoaXMueF9heGlzID0gVmVjdG9yLmNyb3NzX3Byb2R1Y3QoaGVscF92LCB0aGlzLnpfYXhpcykubm9ybWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy55X2F4aXMgPSBWZWN0b3IuY3Jvc3NfcHJvZHVjdCh0aGlzLnpfYXhpcywgdGhpcy54X2F4aXMpO1xyXG5cclxuICAgICAgICAvLyBjYW1lcmEg5Y6f6bueXHJcbiAgICAgICAgdGhpcy5leWUgPSBleWU7XHJcblxyXG4gICAgICAgIC8vIGNhbWVyYSBmb3ZcclxuICAgICAgICB0aGlzLmZvdl9kZWdyZWUgPSBmb3ZfZGVncmVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZV9yYXkoeF93ZWlnaHQ6IG51bWJlciwgeV93ZWlnaHQ6IG51bWJlciwgcmF0aW86IG51bWJlcikge1xyXG4gICAgICAgIGxldCBoYWxmX2Zvdl9yYWQgPSBkZWdyZWVfdG9fUmFkKDAuNSAqIHRoaXMuZm92X2RlZ3JlZSk7XHJcbiAgICAgICAgbGV0IHRhbl9oID0gTWF0aC50YW4oaGFsZl9mb3ZfcmFkKTtcclxuICAgICAgICBsZXQgdGFuX3cgPSB0YW5faCAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgZGlyID0gdGhpcy56X2F4aXNcclxuICAgICAgICAgICAgLmFkZCh0aGlzLnhfYXhpcy5tdWx0aXBseSh4X3dlaWdodCAqIHRhbl93KSlcclxuICAgICAgICAgICAgLmFkZCh0aGlzLnlfYXhpcy5tdWx0aXBseSh5X3dlaWdodCAqIHRhbl9oKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmF5KHRoaXMuZXllLmNsb25lKCksIGRpcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKHJlbmRlcl90YXJnZXQ6IFJlbmRlclRhcmdldCwgb2JqX2xpc3Q6IEhpdGFibGVbXSkge1xyXG4gICAgICAgIHJlbmRlcl90YXJnZXQucmVuZGVyX3BpeGVsKCh4X3dlaWdodDogbnVtYmVyLCB5X3dlaWdodDogbnVtYmVyLCByYXRpbzogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByYXkgPSB0aGlzLmNyZWF0ZV9yYXkoeF93ZWlnaHQsIHlfd2VpZ2h0LCByYXRpbyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGl0X3NvcnRfbGlzdCA9IG9ial9saXN0Lm1hcChvYmogPT4gb2JqLmhpdChyYXkpKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihpbmZvID0+IGluZm8uaXNfaGl0KVxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGE6IEhpdEluZm8sIGI6IEhpdEluZm8pID0+IGEudCAtIGIudCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmnInlsITkuK3ll45cclxuICAgICAgICAgICAgbGV0IGlzX2hpdCA9IGhpdF9zb3J0X2xpc3QubGVuZ3RoICE9IDA7XHJcbiAgICAgICAgICAgIGlmIChpc19oaXQpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBoaXRfc29ydF9saXN0WzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSByZXN1bHQuaXNfaGl0ID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IHJlc3VsdC5pc19oaXQgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gMC41O1xyXG4gICAgICAgICAgICAgICAgdmFyIGcgPSAwLjU7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IDAuNTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IociwgZywgYik7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCBQbGFuZSBmcm9tIFwiLi9QbGFuZVwiO1xyXG5pbXBvcnQgUmF5IGZyb20gXCIuL1JheVwiO1xyXG5pbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tIFwiLi9IaXRJbmZvXCI7XHJcbmltcG9ydCBIaXRhYmxlIGZyb20gXCIuL0hpdGFibGVcIjtcclxuXHJcbi8vIOWwj+aWueWhilxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWN0IGltcGxlbWVudHMgSGl0YWJsZSB7XHJcbiAgICBwbGFuZTogUGxhbmU7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGxhbmU6IFBsYW5lLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucGxhbmUgPSBwbGFuZTtcclxuICAgICAgICB0aGlzLncgPSB3O1xyXG4gICAgICAgIHRoaXMuaCA9IGg7XHJcbiAgICB9XHJcblxyXG4gICAgaGl0KHJheTogUmF5KTogSGl0SW5mbyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGxhbmUuaGl0KHJheSk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5pc19oaXQpIHtcclxuICAgICAgICAgICAgbGV0IGhpdF9wb3MgPSByZXN1bHQuaGl0X3BvcztcclxuICAgICAgICAgICAgbGV0IGRpZmYgPSBoaXRfcG9zLm1pbnVzKHRoaXMucGxhbmUuQyk7XHJcbiAgICAgICAgICAgIGxldCB3X2F4aXMgPSBWZWN0b3IuY3Jvc3NfcHJvZHVjdChWZWN0b3IudXAsIHRoaXMucGxhbmUuTikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIGxldCBoX2F4aXMgPSBWZWN0b3IuY3Jvc3NfcHJvZHVjdCh3X2F4aXMsIHRoaXMucGxhbmUuTik7XHJcbiAgICAgICAgICAgIGxldCB3X3ZhbHVlID0gVmVjdG9yLmRvdF9wcm9kdWN0KGRpZmYsIHdfYXhpcyk7XHJcbiAgICAgICAgICAgIGxldCBoX3ZhbHVlID0gVmVjdG9yLmRvdF9wcm9kdWN0KGRpZmYsIGhfYXhpcyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaXNfaGl0ID0gTWF0aC5hYnMod192YWx1ZSkgPCB0aGlzLncgJiYgTWF0aC5hYnMoaF92YWx1ZSkgPCB0aGlzLmg7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc19oaXQsXHJcbiAgICAgICAgICAgICAgICBoaXRfcG9zLFxyXG4gICAgICAgICAgICAgICAgdDogcmVzdWx0LnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc19oaXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFZlY3RvciBmcm9tICcuL1ZlY3Rvcic7XHJcbmltcG9ydCBSYXkgZnJvbSAnLi9SYXknO1xyXG5pbXBvcnQgeyBudW1iZXJfZXF1YWwgfSBmcm9tICcuL1Rvb2wnO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tICcuL0hpdEluZm8nO1xyXG5pbXBvcnQgSGl0YWJsZSBmcm9tICcuL0hpdGFibGUnO1xyXG5cclxuLy8g5bmz6Z2iXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYW5lIGltcGxlbWVudHMgSGl0YWJsZSB7XHJcblxyXG4gICAgQzogVmVjdG9yO1xyXG4gICAgTjogVmVjdG9yO1xyXG4gICAgY29uc3RydWN0b3IocG9pbnQ6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLkMgPSBwb2ludDtcclxuICAgICAgICB0aGlzLk4gPSBub3JtYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5ris6KmmdGVzcF9w5ZKM5pa55ZCR6YeP5piv5LiN5piv5Zyo5ZCM5LiA6YKKXHJcbiAgICBpc19wb3NpdGl2ZSh0ZXN0X3A6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCBkaWZmID0gVmVjdG9yLm1pbnVzKHRlc3RfcCwgdGhpcy5DKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBWZWN0b3IuZG90X3Byb2R1Y3QoZGlmZiwgdGhpcy5OKTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGhpdChyYXk6IFJheSk6IEhpdEluZm8ge1xyXG4gICAgICAgIC8vIHJheSBoaXQgcGxhbmUgXHJcbiAgICAgICAgbGV0IGZyb20gPSByYXkuZnJvbTtcclxuICAgICAgICBsZXQgZGlyID0gcmF5LmRpcjtcclxuXHJcbiAgICAgICAgLy8gKEYtQynjgIJOICsgdCAoROOAgk4pID0gMFxyXG4gICAgICAgIC8vIHQgID0gKEMtRinjgIJOIC8gKETjgIJOKVxyXG4gICAgICAgIC8vIHQgID0gKEEgLyAoQilcclxuICAgICAgICBsZXQgQiA9IFZlY3Rvci5kb3RfcHJvZHVjdChkaXIsIHRoaXMuTik7XHJcbiAgICAgICAgbGV0IEEgPSBWZWN0b3IuZG90X3Byb2R1Y3QoVmVjdG9yLm1pbnVzKHRoaXMuQywgZnJvbSksIHRoaXMuTik7XHJcblxyXG4gICAgICAgIC8vIGF2b2lkIGRpdmlkZSBieSAwXHJcbiAgICAgICAgaWYgKG51bWJlcl9lcXVhbChCLCAwKSlcclxuICAgICAgICAgICAgcmV0dXJuIHsgaXNfaGl0OiBmYWxzZSwgaGl0X3BvczogbnVsbCwgdDogLTEgfTtcclxuXHJcbiAgICAgICAgbGV0IHQgPSBBIC8gQjtcclxuICAgICAgICBsZXQgaXNfaGl0ID0gdCA+IDAuMDtcclxuICAgICAgICBsZXQgaGl0X3BvcyA9IGZyb20uYWRkKGRpci5tdWx0aXBseSh0KSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzX2hpdCxcclxuICAgICAgICAgICAgaGl0X3BvcyxcclxuICAgICAgICAgICAgdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmltcG9ydCBSYXkgZnJvbSBcIi4vUmF5XCI7XHJcbmltcG9ydCB7IG51bWJlcl9lcXVhbCB9IGZyb20gJy4vVG9vbCc7XHJcbmltcG9ydCBIaXRJbmZvIGZyb20gXCIuL0hpdEluZm9cIjtcclxuaW1wb3J0IEhpdGFibGUgZnJvbSBcIi4vSGl0YWJsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BoZXJlIGltcGxlbWVudHMgSGl0YWJsZSB7XHJcblxyXG4gICAgQzogVmVjdG9yOyAvLyDnkIPkuK3lv4NcclxuICAgIFI6IG51bWJlcjsgLy8g55CD5Y2K5b6RXHJcblxyXG4gICAgY29uc3RydWN0b3IoQzogVmVjdG9yLCBSOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLkMgPSBDO1xyXG4gICAgICAgIHRoaXMuUiA9IFI7XHJcbiAgICB9XHJcblxyXG4gICAgaGl0KHJheTogUmF5KTogSGl0SW5mbyB7XHJcbiAgICAgICAgLy8g6KejMuasoeaWueeoi+W8j1xyXG4gICAgICAgIC8vIChYLUMp44CCKFgtQykgPSBSKlJcclxuICAgICAgICAvLyBYPUYrdCpEXHJcbiAgICAgICAgLy8gdD1bKC1iLXNxcnRfaykvMmEsKC1iK3NxcnRfaykvMmFdXHJcbiAgICAgICAgbGV0IEQgPSByYXkuZGlyO1xyXG4gICAgICAgIGxldCBGID0gcmF5LmZyb207XHJcbiAgICAgICAgbGV0IGEgPSBWZWN0b3IuZG90X3Byb2R1Y3QoRCwgRCk7XHJcbiAgICAgICAgbGV0IGIgPSAyICogKFZlY3Rvci5kb3RfcHJvZHVjdChELCBGKSAtIFZlY3Rvci5kb3RfcHJvZHVjdChELCB0aGlzLkMpKTtcclxuICAgICAgICBsZXQgYyA9IFZlY3Rvci5kb3RfcHJvZHVjdChGLCBGKSAtIDIgKiBWZWN0b3IuZG90X3Byb2R1Y3QoRiwgdGhpcy5DKSArIFZlY3Rvci5kb3RfcHJvZHVjdCh0aGlzLkMsIHRoaXMuQykgLSB0aGlzLlIgKiB0aGlzLlI7XHJcblxyXG4gICAgICAgIGxldCBrID0gYiAqIGIgLSA0ICogYSAqIGM7XHJcbiAgICAgICAgaWYgKG51bWJlcl9lcXVhbChrLCAwKSkgeyAgLy8g5Lqk5pa8Mem7nlxyXG4gICAgICAgICAgICBsZXQgdCA9IC1iIC8gKDIgKiBhKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBoaXRfcG9zID0gRi5hZGQoRC5tdWx0aXBseSh0KSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc19oaXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoaXRfcG9zLFxyXG4gICAgICAgICAgICAgICAgdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGsgPiAwKSB7IC8vIOS6pOaWvDLpu55cclxuXHJcbiAgICAgICAgICAgIC8vIOmBjua/vuWHunQ+MO+8jHJheS5mcm9t5Zyo55CD5YWn55CD5pyJ5Y+v6IO95Ye654++dDwwXHJcbiAgICAgICAgICAgIGxldCBzcXJ0X2sgPSBNYXRoLnNxcnQoayk7XHJcbiAgICAgICAgICAgIGxldCB0X2xpc3QgPSBbKC1iIC0gc3FydF9rKSAvICgyICogYSksICgtYiArIHNxcnRfaykgLyAoMiAqIGEpXS5maWx0ZXIoeCA9PiB4ID4gMCk7XHJcbiAgICAgICAgICAgIGxldCB0ID0gdF9saXN0WzBdO1xyXG4gICAgICAgICAgICBsZXQgaGl0X3BvcyA9IEYuYWRkKEQubXVsdGlwbHkodCkpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaXNfaGl0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaGl0X3BvcyxcclxuICAgICAgICAgICAgICAgIHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIOaykuS6pOm7nlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaXNfaGl0OiBmYWxzZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlclRhcmdldCB7XHJcbiAgICB3OiBudW1iZXIgPSAzMjA7XHJcbiAgICBoOiBudW1iZXIgPSAyNDA7XHJcbiAgICBiYWNrYnVmZmVyOiBPZmZzY3JlZW5DYW52YXMgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IodzogbnVtYmVyLCBoOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLncgPSB3O1xyXG4gICAgICAgIHRoaXMuaCA9IGg7XHJcbiAgICAgICAgdGhpcy5iYWNrYnVmZmVyID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyX3BpeGVsKGZ1bmM6ICh4X3dlaWdodDogbnVtYmVyLCB5X3dlaWdodDogbnVtYmVyLCByYXRpbzogbnVtYmVyKSA9PiBWZWN0b3IpIHtcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHRfMmQgPSB0aGlzLmJhY2tidWZmZXIuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHNvdXJjZSBkYXRhIGFycmF5XHJcbiAgICAgICAgbGV0IGJhY2tidWZmZXJfZGF0YSA9IGNvbnRleHRfMmQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICBsZXQgYmFja2J1ZmZlcl9kYXRhX2FycmF5ID0gYmFja2J1ZmZlcl9kYXRhLmRhdGE7XHJcblxyXG4gICAgICAgIGxldCByYXRpbyA9IHRoaXMudyAvIHRoaXMuaDtcclxuXHJcbiAgICAgICAgLy8gc2V0IGFycmF5IHZhbHVlXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmg7ICsreSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMudzsgKyt4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZ2JhIGVhY2ggY29sb3IgaXMgNGJ5dGVcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IDQgKiAoeCArIHkgKiB0aGlzLncpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJlbWFwIHRvIDB+MVxyXG4gICAgICAgICAgICAgICAgbGV0IFggPSAoeCAvIHRoaXMudyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgWSA9ICh5IC8gdGhpcy5oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgeSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIFkgPSAxIC0gWTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZW1hcCB0byAtMX4xXHJcbiAgICAgICAgICAgICAgICBsZXQgeF93ZWlnaHQgPSBYICogMiAtIDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgeV93ZWlnaHQgPSBZICogMiAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gZnVuYyh4X3dlaWdodCwgeV93ZWlnaHQsIHJhdGlvKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgciA9IGNvbG9yLng7XHJcbiAgICAgICAgICAgICAgICBsZXQgZyA9IGNvbG9yLnk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYiA9IGNvbG9yLno7XHJcblxyXG4gICAgICAgICAgICAgICAgYmFja2J1ZmZlcl9kYXRhX2FycmF5W2luZGV4KytdID0gTWF0aC5yb3VuZChyICogMjU1KTtcclxuICAgICAgICAgICAgICAgIGJhY2tidWZmZXJfZGF0YV9hcnJheVtpbmRleCsrXSA9IE1hdGgucm91bmQoZyAqIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBiYWNrYnVmZmVyX2RhdGFfYXJyYXlbaW5kZXgrK10gPSBNYXRoLnJvdW5kKGIgKiAyNTUpO1xyXG4gICAgICAgICAgICAgICAgYmFja2J1ZmZlcl9kYXRhX2FycmF5W2luZGV4XSA9IDI1NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0XzJkLnB1dEltYWdlRGF0YShiYWNrYnVmZmVyX2RhdGEsIDAsIDApO1xyXG5cclxuXHJcbiAgICAgICAgLy8g6Kit5a6aYnVmZmVy55qE5aSn5bCP5ZKMY3NzIHN0eWxl55qE5aSn5bCP5LiA5qijXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9vcGVuaG9tZS5jYy9Hb3NzaXAvV2ViR0wvQ2FudmFzLmh0bWxcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IHRoaXMudyArICdweCc7XHJcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IHRoaXMuaCArICdweCc7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBjb3B5IGJhY2tidWZmZXIgdG8gY2FudmFzXHJcbiAgICAgICAgbGV0IGNvbnRleHRfYml0bWFwX3JlbmRlciA9IGNhbnZhcy5nZXRDb250ZXh0KFwiYml0bWFwcmVuZGVyZXJcIik7XHJcbiAgICAgICAgY29udGV4dF9iaXRtYXBfcmVuZGVyLnRyYW5zZmVyRnJvbUltYWdlQml0bWFwKHRoaXMuYmFja2J1ZmZlci50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQXBwIGZyb20gJy4vQXBwJztcclxuXHJcbm5ldyBBcHAoKTsiLCJpbXBvcnQgVmVjdG9yIGZyb20gJy4vTWF0aC9WZWN0b3InXHJcbmltcG9ydCBDYW1lcmEgZnJvbSAnLi9NYXRoL0NhbWVyYSdcclxuaW1wb3J0IFJlY3QgZnJvbSAnLi9NYXRoL1JlY3QnO1xyXG5pbXBvcnQgUGxhbmUgZnJvbSAnLi9NYXRoL1BsYW5lJztcclxuaW1wb3J0IFNwaGVyZSBmcm9tICcuL01hdGgvU3BoZXJlJztcclxuaW1wb3J0IFJlbmRlclRhcmdldCBmcm9tICcuL01hdGgvUmVuZGVyVGFyZ2V0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgbGV0IHJlY3QgPSBuZXcgUmVjdChuZXcgUGxhbmUoVmVjdG9yLnplcm8sIG5ldyBWZWN0b3IoMCwgMCwgLTEpKSwgMiwgMik7XHJcbiAgICAgICAgbGV0IHNwaGVyZSA9IG5ldyBTcGhlcmUobmV3IFZlY3Rvcig2LCAyLCAwKSwgMik7XHJcbiAgICAgICAgbGV0IG9ial9saXN0ID0gW3JlY3QsIHNwaGVyZV07XHJcblxyXG4gICAgICAgIGxldCBjYW1lcmEgPSBuZXcgQ2FtZXJhKG5ldyBWZWN0b3IoMCwgMTAsIC0xMCksIFZlY3Rvci56ZXJvLCA2MCk7XHJcbiAgICAgICAgbGV0IHJlbmRlcl90YXJnZXQgPSBuZXcgUmVuZGVyVGFyZ2V0KDMyMCwgMjQwKTtcclxuICAgICAgICBjYW1lcmEucmVuZGVyKHJlbmRlcl90YXJnZXQsIG9ial9saXN0KTtcclxuICAgIH1cclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==